{% load static %}
<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>MyStock - Login</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sign-in/">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'css/login.css' %}">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      /* Estilos para a biometria */
      #videoElement {
        width: 100%;
        max-width: 300px; /* Ajuste conforme necessário */
        height: auto;
        border-radius: 8px;
        margin-top: 15px;
        border: 1px solid #ccc;
      }
      #capturedImage {
        width: 100%;
        max-width: 300px; /* Ajuste conforme necessário */
        height: auto;
        border-radius: 8px;
        margin-top: 15px;
        border: 1px solid #ccc;
      }
      .btn-capture {
          background-color: #0d6efd; /* Cor primária do Bootstrap */
          color: white;
          border: none;
      }
      .btn-capture:hover {
          background-color: #0b5ed7; /* Escurecer no hover */
      }
      /* Estilo para as mensagens de feedback */
      #message {
        margin-top: 20px;
        font-weight: bold;
      }
      .success { color: green; }
      .error { color: red; }
    </style>

    <link href="{% static 'css/login.css' %}" rel="stylesheet">
  </head>
  <body class="text-center">

<main class="form-signin">
  <form id="loginForm" method="post" action="{% url 'validar_biometria' %}">

    {% csrf_token %}
    <img class="mb-4" src="{% static 'imgs/apsLogin.png' %}" alt="" width="150" height="150">

    <h1 class="h3 mb-3 fw-normal">Login Biométrico</h1>

    <hr class="my-4">

    <div class="d-flex flex-column align-items-center">
        <video id="videoElement" autoplay class="mb-3"></video>
        <canvas id="canvas" style="display:none;"></canvas>
        <button type="button" id="captureBtn" class="w-100 btn btn-lg btn-capture mb-3">Capturar Imagem para Login</button>
        <img id="capturedImage" style="display:none;"/>
    </div>
    <input type="hidden" name="imagem_base64" id="imagemBase64Input">
    <button id="loginButton" class="w-100 btn btn-lg mt-3" type="submit" style="background-color: #01a0319f; color: white; border: none;">Entrar</button>

    <a href="{% url 'cadastrar_biometria' %}" class="w-100 btn btn-lg mt-2" style="background-color: #6c757d; color: white; border: none;">
        Não tem cadastro? Cadastre-se
    </a>
    <div id="message" class="mt-3">
        {% if error %}
            <p class="text-danger">{{ error }}</p>
        {% endif %}
    </div>

    <p class="mt-5 mb-3 text-muted">&copy;2025</p>
  </form>
</main>

    <script src="{% static 'js/webcam_login.js' %}"></script>
  </body>
</html>